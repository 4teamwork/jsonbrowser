{% macro navtree(nodes, toplevel=True) -%}

{% if toplevel %}
<ul id="navtree" class="hidden">
{% else %}
<ul>
{%- endif %}

  {% for node in nodes %}
    <li>
        <a href="{{ url_for('browse', obj_path=node._path.lstrip('/')) }}">{{node._full_title}}</a>
        {% if node.nodes %}
          {{ navtree(node.nodes) }}
        {%- endif %}
    </li>
  {% endfor %}

</ul>

{%- endmacro %}